<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Html - Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="chat_messages_div">
        <ul id="main_chat_div"></ul>
    </div>
    <form onsubmit="return submitMessage();">

        <input id="message" placeholder="Enter message" autocomplete="off">

        <input type="submit">

    </form>
</body>
<script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-database.js"></script>

<script>
    const firebaseConfig = {
      apiKey: "AIzaSyBqiTWzSJbahNyHxMiS4XgmYWJ4kwmYZT8",
      authDomain: "html-chat-app-by-crius.firebaseapp.com",
      projectId: "html-chat-app-by-crius",
      storageBucket: "html-chat-app-by-crius.appspot.com",
      messagingSenderId: "294966226222",
      appId: "1:294966226222:web:cfca7e6b89f8f43a08debf"
    };

    firebase.initializeApp(firebaseConfig);

    var myName = prompt("Enter Your Username")

    function submitMessage() {

        var message_val = document.getElementById("message").value;

        firebase.database().ref("messages").push().set({
            "sender" : myName,
            "message" : message_val
        });

        return false;
    }

    firebase.database().ref("messages").on("child_added", function(snapshot) {
        var html = "";
        html += "<li>";
            html += snapshot.val().sender + " : " + snapshot.val().message;
        html += "</li>";

        document.getElementById("main_chat_div").innerHTML += html;


    })


  </script>


</html>